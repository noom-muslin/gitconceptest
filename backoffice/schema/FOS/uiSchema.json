branch-2
{
    "type": "BoxLayout",
    "elements": [
        {
            "type": "StackLayout",
            "options": {
                "sx": {
                    "padding": "16px",
                    "backgroundColor": "primary.main"
                }
            },
            "elements": [
                {
                    "type": "Typography",
                    "label": "{zboRouteObject.label}",
                    "options": {
                        "variant": "h6White",
                        "sx": {
                            "padding": "4px 0"
                          }
                        
                    }
                }
            ]
        },
        {
            "type": "StackLayout",
            "options": {
                "spacing": "16px",
                "sx": {
                    "padding": "16px"
                }
            },
            "elements": [
                {
                    "type": "Typography",
                    "label": "หน้าหลัก",
                    "options": {
                        "variant": "h6",
                        "sx": {
                            "padding": "4px 0"
                          }
                    }
                },

                {
                    "type": "PaperLayout",
                    "options": {
                        "component": "section",
                        "variant": "section"
                    },
                    "elements": [
                        {
                            "type": "StackLayout",
                            "options": {
                                "direction": "row"
                            },
                            "elements": [
                                {
                                    "type": "Typography",
                                    "label": "Work List"
                                }
                            ]
                        },
                
                        {
                            "type": "BoxLayout",
                            "elements": [
                                {
                                    "type": "Datagrid",
                                    "scope": "#",
                                    "options": {
                                        "grid": "FOS/WorkList",
                                        "dataContext": {
                                            "query": "FOS/WorkList",
                                            "queryVariables": {
                                                "assignee": "{user.login}",
                                                "taskType": "{zboRouteObject.buckets.content.dataContext.payload.stationName}"
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    ]
                },

                {
                    "type": "PaperLayout",
                    "options": {
                        "component": "section",
                        "variant": "section"
                    },
                    "elements": [
                        {
                            "type": "StackLayout",
                            "options": {
                            "direction": "row"
                            },
                            "elements": [
                            {
                                "type": "Typography",
                                "label": "Work Basket"
                            },
                            {
                                "type": "ActionButton",
                                "label": "Get Top Task",
                                "options": {
                                    "operationType": "script",
                                    "converter": "workbasket_get_top_task",
                                    "variant": "secondary",
                                    "size": "small"
                                }
                            }
                            ]
                        },
                        {
                            "type": "StackLayout",
                            "options": {
                                "spacing": "16px"
                            },
                            "elements":[
                                {
                                    "type": "BoxLayout",
                                    "options": {
                                        "sx": {
                                          "padding": "16px 16px 0 16px"
                                        }
                                    },
                                    "elements": [
                                        {
                                        "type": "GridLayout",
                                        "options": {
                                            "container": "true",
                                            "spacing": "16px"
                                          },
                                        "elements": [
                                            {
                                            "type": "GridLayout",
                                            "options": {
                                                "xs": "3"
                                            },
                                            "elements": [
                                                {
                                                    "type": "Typography",
                                                    "label": "วันที่เอกสารถึง WB",
                                                    "options": {
                                                        "variant": "label"
                                                    }
                                                },
                                                {
                                                    "type": "ExternalComponent",
                                                    "scope": "#/properties/search/properties/doc_in_datetime",
                                                    "options": {
                                                        "externalComponentName": "thai-calendar",
                                                        "externalComponentScope": "remote1",
                                                        "externalComponentModule": "./ThaiDatePicker",
                                                        "views": "year,month,day",
                                                        "variant": "outlined",
                                                        "sx": {
                                                            "width": "100%"
                                                        }
                                                    }
                                                }
                                            ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "Application No.",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                        {
                                                        "type": "TextField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/application_number",
                                                        "options": {
                                                            "fullwidth": true,
                                                            "variant": "outlined"
                                                        },
                                                        "errors": {
                                                            "pattern": "กรุณาระบุข้อมูลเป็นตัวอักษรภาษาอังกฤษ ตัวเลข - และ _ เท่านั้น",
                                                            "minLength": "กรุณาระบุข้อมูลอย่างน้อย 5 ตัวอักษร"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "Application Group",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "SelectField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/application_group",
                                                        "options": {
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "application_group_enum"
                                                        }
                                                    }
                                                ]
                                            },
                        
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "Application Class",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "SelectField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/application_class",
                                                        "options": {
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "application_class_enum"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "ชื่อลูกค้า",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "TextField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/customer_firstname",
                                                        "options": {
                                                            "fullwidth": true,
                                                            "variant": "outlined"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "นามสกุลลูกค้า",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "TextField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/customer_lastname",
                                                        "options": {
                                                            "fullwidth": true,
                                                            "variant": "outlined"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "ประเภทเอกสารอ้างอิง",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "SelectField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/reference_type",
                                                        "options": {
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "reference_type_enum"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "เลขที่เอกสารอ้างอิง",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "TextField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/reference_no",
                                                        "options": {
                                                            "fullwidth": true,
                                                            "variant": "outlined"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "Product Type",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "SelectField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/product_type",
                                                        "options": {
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "product_type_enum"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "Sub Product Type",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "SelectField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/sub_product_type",
                                                        "options": {
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "sub_product_type_enum"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "ช่องทาง",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                    "type": "SelectField",
                                                    "label": false,
                                                    "scope": "#/properties/search/properties/channel",
                                                        "options": {
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "application_channel_enum"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "FOS Status",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "SelectField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/fosStatus",
                                                        "options": {                                          
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "fos_status_enum"
                                                        }
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "GridLayout",
                                                "options": {
                                                    "xs": "3"
                                                },
                                                "elements": [
                                                    {
                                                        "type": "Typography",
                                                        "label": "FOS Interface Status",
                                                        "options": {
                                                            "variant": "label"
                                                        }
                                                    },
                                                    {
                                                        "type": "SelectField",
                                                        "label": false,
                                                        "scope": "#/properties/search/properties/fosInterfaceStatus",
                                                        "options": {
                                                            "variant": "outlined",
                                                            "fullwidth": true,
                                                            "autocomplete": true,
                                                            "enumDataPath": "fos_interface_status_enum"
                                                        }
                                                    }
                                                ]
                                            }
                                        ]
                                        }
                                    ]
                                },
                    
                                {
                                    "type": "StackLayout",
                                    "options": {
                                        "direction": "row",
                                        "justifyContent": "space-between",
                                        "sx": {
                                            "padding": "0 16px"
                                          }
                                    },
                                    "elements": [
                                        {
                                            "type": "ActionButton",
                                            "label": "ล้างค่า",
                                            "options": {
                                              "variant": "secondaryError",
                                              "operationType": "script",
                                              "converter": "clear_filter_applications_grid",
                                              "resultMappingSchema": {
                                                "type": "object",
                                                "properties": {
                                                  "search": {
                                                    "type": "object",
                                                    "properties": {
                                                        "doc_in_datetime":{
                                                            "type":"string"
                                                        },
                                                        "application_number":{
                                                            "type": "string",
                                                            "pattern": "^[A-Za-z0-9_-]+$"
                                                        },
                                                        "application_group":{
                                                            "type": "string"
                                                        },
                                                        "application_class":{
                                                            "type": "string"
                                                        },
                                                        "customer_firstname":{
                                                            "type": "string"
                                                        },
                                                        "customer_lastname":{
                                                            "type": "string"
                                                        },
                                                        "reference_type":{
                                                            "type": "string"
                                                        },
                                                        "reference_no":{
                                                            "type": "string"
                                                        },
                                                        "product_type":{
                                                            "type": "string"
                                                        },
                                                        "sub_product_type":{
                                                            "type": "string"
                                                        },
                                                        "channel":{
                                                            "type": "string"
                                                        },
                                                        "fosStatus":{
                                                            "type": "string"
                                                        },
                                                        "fosInterfaceStatus":{
                                                            "type": "string"
                                                        }
                                                    }
                                                  },
                                                  "workbasket_grid": {
                                                    "type": "object",
                                                    "properties": {
                                                      "filters": {
                                                        "type": "array"
                                                      },
                                                      "pagination": {
                                                        "type": "object",
                                                        "properties": {
                                                          "pageIndex": {
                                                            "type": "number"
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              },
                                              "validationSchema": false
                                            }
                                        },
                                        {
                                            "type": "ActionButton",
                                             "label": "ค้นหา",
                                            "options": {
                                                "variant": "primary",
                                                "chain": [
                                                    {
                                                        "operationType": "script",
                                                        "converter": "check_search_criteria",
                                                        "resultMappingSchema": {
                                                            "type": "object",
                                                            "properties": {
                                                                "canSubmit": {
                                                                    "type": "boolean",
                                                                    "dataPath": "canSubmit"
                                                                }
                                                            }
                                                        }
                                                    },
                                                    {
                                                        "if": {
                                                          "type": "object",
                                                          "required": [
                                                            "payload"
                                                          ],
                                                          "properties": {
                                                            "payload": {
                                                              "type": "object",
                                                              "required": [
                                                                "data"
                                                              ],
                                                              "properties": {
                                                                "data": {
                                                                  "required": [
                                                                    "canSubmit"
                                                                  ],
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "canSubmit": {
                                                                      "type": "boolean",
                                                                      "const": true
                                                                    }
                                                                  }
                                                                }
                                                              }
                                                            }
                                                          }
                                                        },
                                                        "operationType": "script",
                                                        "converter": "workbasket_filter",
                                                        "size": "large",
                                                        "sx": {
                                                            "backgroundColor": "#5b21b6"
                                                        },
                                                        "resultMappingSchema": {
                                                          "type": "object",
                                                          "properties": {
                                                            "workbasket_grid": {
                                                              "type": "object",
                                                              "properties": {
                                                                "filters": {
                                                                  "type": "array"
                                                                },
                                                                "pagination": {
                                                                  "type": "object",
                                                                  "properties": {
                                                                    "pageIndex": {
                                                                      "type": "number"
                                                                    }
                                                                  }
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                    },
                                                    {
                                                        "if": {
                                                          "else": true
                                                        },
                                                        "operationType": "modal",
                                                        "dialogName": "m_Basic_Error",
                                                        "subtype": "show",
                                                        "dialogVariables": {
                                                          "title": "ไม่สามารถค้นหาได้",
                                                          "text": "กรุณาระบุข้อมูลอย่างน้อย 1 รายการเพื่อค้นหา"
                                                        }
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                },

                                {
                                    "type": "BoxLayout",
                                    "options": {
                                        "htmlID": "WorkBasket"
                                    },
                                    "elements": [
                                        {
                                            "type": "Datagrid",
                                            "scope": "#/properties/workbasket_grid",
                                            "options": {
                                                "grid": "FOS/WorkBasket",
                                                "dataContext": {
                                                    "query": "FOS/WorkBasket",
                                                    "queryVariables": {
                                                        "taskType": "{zboRouteObject.buckets.content.dataContext.payload.stationName}"
                                                    }
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}