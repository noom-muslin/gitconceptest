{
  "type": "StackLayout",
  "options": {
    "sx": {
      "minWidth": "800px",
      "maxWidth": "800px"
    }
  },
  "elements": [
    {
      "type": "GridLayout",
      "options": {
        "sx": {
          "padding": "1rem",
          "gap": "1em"
        },
        "container": true
      },
      "elements": [
        {
          "type": "GridLayout",
          "options": {
            "container": true,
            "spacing": "1rem"
          },
          "elements": [
            {
              "type": "GridLayout",
              "options": {
                "xs": 6
              },
              "elements": [
                {
                  "type": "StackLayout",
                  "options": {
                    "direction": "row"
                  },
                  "elements": [
                    {
                      "type": "Typography",
                      "label": "กลุ่มบริการเสริม",
                      "options": {
                        "variant": "label"
                      }
                    },
                    {
                      "type": "Typography",
                      "label": "*",
                      "options": {
                        "variant": "field-label-error"
                      }
                    }
                  ]
                },
                {
                  "type": "SelectField",
                  "label": false,
                  "scope": "#/properties/appl_account_additionalservice_new/properties/addition_service_group",
                  "errors": {
                    "required": "กรุณาระบุข้อมูลให้ครบถ้วน"
                  },
                  "options": {
                    "hideRequiredAsterisk": true,
                    "fullwidth": true,
                    "variant": "outlined",
                    "sx": {
                      "height": "38px"
                    },
                    "enumDataPath": "enum_additional_service_group"
                  }
                }
              ]
            },
            {
              "type": "GridLayout",
              "options": {
                "xs": 6
              },
              "elements": [
                {
                  "type": "StackLayout",
                  "options": {
                    "direction": "row"
                  },
                  "elements": [
                    {
                      "type": "Typography",
                      "label": "ประเภททำประกัน",
                      "options": {
                        "variant": "label"
                      }
                    },
                    {
                      "type": "Typography",
                      "label": "*",
                      "options": {
                        "variant": "field-label-error"
                      }
                    }
                  ]
                },
                {
                  "type": "SelectField",
                  "label": false,
                  "scope": "#/properties/appl_account_additionalservice_new/properties/addition_service_type",
                  "errors": {
                    "required": "กรุณาระบุข้อมูลให้ครบถ้วน"
                  },
                  "options": {
                    "hideRequiredAsterisk": true,
                    "fullwidth": true,
                    "variant": "outlined",
                    "sx": {
                      "height": "38px"
                    },
                    "enumDataPath": "enum_additional_service",
                    "query": "Register/GetAdditionalService",
                    "queryVariables": {
                      "where": {
                        "additional_service_group": {
                          "_eq": "{appl_account_additionalservice_new.addition_service_group}"
                        }
                      }
                    },
                    "converter": "mapValueLabel"
                  },
                  "rule": {
                    "effect": "ENABLE",
                    "condition": {
                      "scope": "#/properties/appl_account_additionalservice_new",
                      "schema": {
                        "properties": {
                          "addition_service_group": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "addition_service_group"
                        ]
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "GridLayout",
          "options": {
            "container": true,
            "spacing": "1rem"
          },
          "elements": [
            {
              "type": "GridLayout",
              "options": {
                "xs": 6
              },
              "elements": [
                {
                  "type": "StackLayout",
                  "options": {
                    "direction": "row"
                  },
                  "elements": [
                    {
                      "type": "Typography",
                      "label": "ทุนประกัน",
                      "options": {
                        "variant": "label"
                      }
                    },
                    {
                      "type": "Typography",
                      "label": "*",
                      "options": {
                        "variant": "field-label-error"
                      }
                    }
                  ]
                },
                {
                  "type": "NumberField",
                  "label": false,
                  "scope": "#/properties/appl_account_additionalservice_new/properties/sum_insured_amount",
                  "errors": {
                    "required": "กรุณาระบุข้อมูลให้ครบถ้วน"
                  },
                  "options": {
                    "endAdornmentTypography": {
                      "text": "บาท"
                    },
                    "thousandSeparator": ",",
                    "hideRequiredAsterisk": true,
                    "fullwidth": true,
                    "variant": "outlined",
                    "sx": {
                      "height": "38px"
                    }
                  }
                }
              ]
            },
            {
              "type": "GridLayout",
              "options": {
                "xs": 6
              },
              "elements": [
                {
                  "type": "StackLayout",
                  "options": {
                    "direction": "row"
                  },
                  "elements": [
                    {
                      "type": "Typography",
                      "label": "ระยะเวลาประกัน",
                      "options": {
                        "variant": "label"
                      }
                    },
                    {
                      "type": "Typography",
                      "label": "*",
                      "options": {
                        "variant": "field-label-error"
                      }
                    }
                  ]
                },
                {
                  "type": "NumberField",
                  "label": false,
                  "scope": "#/properties/appl_account_additionalservice_new/properties/insurance_period",
                  "errors": {
                    "required": "กรุณาระบุข้อมูลให้ครบถ้วน",
                    "type": "กรุณากรอกจำนวนปีให้ถูกต้อง"
                  },
                  "options": {
                    "endAdornmentTypography": {
                      "text": "ปี"
                    },
                    "hideRequiredAsterisk": true,
                    "fullwidth": true,
                    "variant": "outlined",
                    "sx": {
                      "height": "38px"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "GridLayout",
          "options": {
            "container": true,
            "spacing": "1rem"
          },
          "elements": [
            {
              "type": "GridLayout",
              "options": {
                "xs": 6
              },
              "elements": [
                {
                  "type": "StackLayout",
                  "options": {
                    "direction": "row"
                  },
                  "elements": [
                    {
                      "type": "Typography",
                      "label": "ชื่อผู้เอาประกัน",
                      "options": {
                        "variant": "label"
                      }
                    },
                    {
                      "type": "Typography",
                      "label": "*",
                      "options": {
                        "variant": "field-label-error"
                      }
                    }
                  ]
                },
                {
                  "type": "SelectField",
                  "label": false,
                  "scope": "#/properties/appl_account_additionalservice_new/properties/insured_name",
                  "errors": {
                    "required": "กรุณาระบุข้อมูลให้ครบถ้วน"
                  },
                  "options": {
                    "hideRequiredAsterisk": true,
                    "fullwidth": true,
                    "variant": "outlined",
                    "sx": {
                      "height": "38px"
                    },
                    "enumDataPath": "insured_name_list"
                  }
                }
              ]
            },
            {
              "type": "GridLayout",
              "options": {
                "xs": 6
              },
              "elements": [
                {
                  "type": "StackLayout",
                  "options": {
                    "direction": "row"
                  },
                  "elements": [
                    {
                      "type": "Typography",
                      "label": "ค่าเบี้ยประกัน",
                      "options": {
                        "variant": "label"
                      }
                    },
                    {
                      "type": "Typography",
                      "label": "*",
                      "options": {
                        "variant": "field-label-error"
                      }
                    }
                  ]
                },
                {
                  "type": "NumberField",
                  "label": false,
                  "scope": "#/properties/appl_account_additionalservice_new/properties/premium_amount",
                  "errors": {
                    "required": "กรุณาระบุข้อมูลให้ครบถ้วน"
                  },
                  "options": {
                    "endAdornmentTypography": {
                      "text": "บาท"
                    },
                    "thousandSeparator": ",",
                    "hideRequiredAsterisk": true,
                    "fullwidth": true,
                    "variant": "outlined",
                    "sx": {
                      "height": "38px"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "GridLayout",
          "options": {
            "xs": 12,
            "sx": {
              "&.MuiGrid-item": {
                "paddingLeft": "0px",
                "paddingTop": "0px"
              }
            }
          },
          "elements": [
            {
              "type": "StackLayout",
              "options": {
                "direction": "row"
              },
              "elements": [
                {
                  "type": "Typography",
                  "label": "พนักงานขาย",
                  "options": {
                    "variant": "label"
                  }
                },
                {
                  "type": "Typography",
                  "label": "*",
                  "options": {
                    "variant": "field-label-error"
                  }
                }
              ]
            },
            {
              "type": "BoxLayout",
              "elements": [
                {
                  "type": "SelectField",
                  "label": false,
                  "scope": "#/properties/appl_account_additionalservice_new/properties/sale_id",
                  "errors": {
                    "required": "กรุณาระบุข้อมูลให้ครบถ้วน"
                  },
                  "options": {
                    "hideRequiredAsterisk": true,
                    "fullwidth": true,
                    "variant": "outlined",
                    "sx": {
                      "height": "38px"
                    },
                    "query": "Register/StaffProfile",
                    "converter": "staffProfileList",
                    "resultMappingSchema": {
                      "type": "object",
                      "properties": {
                        "value": {
                          "type": "string"
                        },
                        "label": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "GridLayout",
          "options": {
            "xs": 12
          },
          "elements": [
            {
              "type": "StackLayout",
              "options": {
                "sx": {
                  "padding": "1em 1em 0 0"
                }
              },
              "elements": [
                {
                  "type": "CheckboxField",
                  "label": "รวมในวงเงินสินเชื่อ",
                  "scope": "#/properties/appl_account_additionalservice_new/properties/is_credit_line_included"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "StackLayout",
      "options": {
        "direction": "row",
        "justifyContent": "right",
        "sx": {
          "backgroundColor": "white",
          "borderTop": "1px solid #eaebed",
          "padding": "1em"
        }
      },
      "elements": [
        {
          "type": "ActionButton",
          "label": "บันทึกข้อมูล",
          "options": {
            "className": "primaryButton",
            "validationSchema": true,
            "chain": [
              {
                "operationType": "action",
                "conditionTypeId": "Register_Loan_Collateral_Sublimit_Save",
                "payload": {
                  "user_id": "{user.login}",
                  "db_name": "appl_account_additionalservice"
                }
              },
              {
                "if": {
                  "type": "object",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "object",
                      "required": [
                        "payload",
                        "status"
                      ],
                      "properties": {
                        "status": {
                          "type": "object",
                          "required": [
                            "code"
                          ],
                          "properties": {
                            "code": {
                              "type": "number",
                              "const": 1000
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "chain": [
                  {
                    "operationType": "modal",
                    "subtype": "cancel"
                  },
                  {
                    "operationType": "system",
                    "subtype": "refresh"
                  }
                ]
              },
              {
                "if": {
                  "else": true
                },
                "operationType": "modal",
                "dialogName": "m_BasicError_TryAgain",
                "subtype": "show"
              }
            ]
          }
        }
      ]
    }
  ]
}